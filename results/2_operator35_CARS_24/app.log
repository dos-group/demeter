[INFO ] 2023-09-11 09:18:31.773 [main] Context - Reserving NodePort: 32007
[INFO ] 2023-09-11 09:18:32.056 [main] SequenceFSM - STATE-CHANGE: START -> INITIALIZE
[WARN ] 2023-09-11 09:18:32.409 [main] VersionUsageUtils - The client is using resource type 'flinkdeployments' with unstable version 'v1beta1'
[INFO ] 2023-09-11 09:18:37.790 [OkHttp https://10.233.0.1/...] K8sClient - Namespace (operator) DELETED
[INFO ] 2023-09-11 09:18:37.827 [OkHttp https://10.233.0.1/...] K8sClient - Namespace (operator) ADDED
[INFO ] 2023-09-11 09:18:37.828 [main] ClientsManager - Helm deploy: { kafka: { repo : https://charts.bitnami.com/bitnami },{ values : kubernetes/kafka/values.yaml },{ version : 22.1.3 } }
[INFO ] 2023-09-11 09:18:41.059 [pool-4-thread-1] Helm - NAME: kafka
[INFO ] 2023-09-11 09:18:41.059 [pool-4-thread-1] Helm - LAST DEPLOYED: Mon Sep 11 09:18:40 2023
[INFO ] 2023-09-11 09:18:41.059 [pool-4-thread-1] Helm - NAMESPACE: operator
[INFO ] 2023-09-11 09:18:41.060 [pool-4-thread-1] Helm - STATUS: deployed
[INFO ] 2023-09-11 09:18:41.060 [pool-4-thread-1] Helm - REVISION: 1
[INFO ] 2023-09-11 09:18:41.060 [pool-4-thread-1] Helm - TEST SUITE: None
[INFO ] 2023-09-11 09:18:41.060 [pool-4-thread-1] Helm - NOTES:
[INFO ] 2023-09-11 09:18:41.060 [pool-4-thread-1] Helm - CHART NAME: kafka
[INFO ] 2023-09-11 09:18:41.060 [pool-4-thread-1] Helm - CHART VERSION: 22.1.3
[INFO ] 2023-09-11 09:18:41.060 [pool-4-thread-1] Helm - APP VERSION: 3.4.0
[INFO ] 2023-09-11 09:18:41.061 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.061 [pool-4-thread-1] Helm - ** Please be patient while the chart is being deployed **
[INFO ] 2023-09-11 09:18:41.061 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.061 [pool-4-thread-1] Helm - Kafka can be accessed by consumers via port 9092 on the following DNS name from within your cluster:
[INFO ] 2023-09-11 09:18:41.061 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.062 [pool-4-thread-1] Helm -     kafka.operator.svc.cluster.local
[INFO ] 2023-09-11 09:18:41.062 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.062 [pool-4-thread-1] Helm - Each Kafka broker can be accessed by producers via port 9092 on the following DNS name(s) from within your cluster:
[INFO ] 2023-09-11 09:18:41.063 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.063 [pool-4-thread-1] Helm -     kafka-0.kafka-headless.operator.svc.cluster.local:9092
[INFO ] 2023-09-11 09:18:41.063 [pool-4-thread-1] Helm -     kafka-1.kafka-headless.operator.svc.cluster.local:9092
[INFO ] 2023-09-11 09:18:41.063 [pool-4-thread-1] Helm -     kafka-2.kafka-headless.operator.svc.cluster.local:9092
[INFO ] 2023-09-11 09:18:41.064 [pool-4-thread-1] Helm -     kafka-3.kafka-headless.operator.svc.cluster.local:9092
[INFO ] 2023-09-11 09:18:41.064 [pool-4-thread-1] Helm -     kafka-4.kafka-headless.operator.svc.cluster.local:9092
[INFO ] 2023-09-11 09:18:41.064 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.064 [pool-4-thread-1] Helm - To create a pod that you can use as a Kafka client run the following commands:
[INFO ] 2023-09-11 09:18:41.065 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.065 [pool-4-thread-1] Helm -     kubectl run kafka-client --restart='Never' --image docker.io/bitnami/kafka:3.4.0-debian-11-r33 --namespace operator --command -- sleep infinity
[INFO ] 2023-09-11 09:18:41.065 [pool-4-thread-1] Helm -     kubectl exec --tty -i kafka-client --namespace operator -- bash
[INFO ] 2023-09-11 09:18:41.065 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.065 [pool-4-thread-1] Helm -     PRODUCER:
[INFO ] 2023-09-11 09:18:41.066 [pool-4-thread-1] Helm -         kafka-console-producer.sh \
[INFO ] 2023-09-11 09:18:41.066 [pool-4-thread-1] Helm -             --broker-list kafka-0.kafka-headless.operator.svc.cluster.local:9092,kafka-1.kafka-headless.operator.svc.cluster.local:9092,kafka-2.kafka-headless.operator.svc.cluster.local:9092,kafka-3.kafka-headless.operator.svc.cluster.local:9092,kafka-4.kafka-headless.operator.svc.cluster.local:9092 \
[INFO ] 2023-09-11 09:18:41.066 [pool-4-thread-1] Helm -             --topic test
[INFO ] 2023-09-11 09:18:41.066 [pool-4-thread-1] Helm - 
[INFO ] 2023-09-11 09:18:41.066 [pool-4-thread-1] Helm -     CONSUMER:
[INFO ] 2023-09-11 09:18:41.067 [pool-4-thread-1] Helm -         kafka-console-consumer.sh \
[INFO ] 2023-09-11 09:18:41.067 [pool-4-thread-1] Helm -             --bootstrap-server kafka.operator.svc.cluster.local:9092 \
[INFO ] 2023-09-11 09:18:41.067 [pool-4-thread-1] Helm -             --topic test \
[INFO ] 2023-09-11 09:18:41.067 [pool-4-thread-1] Helm -             --from-beginning
[INFO ] 2023-09-11 09:18:41.073 [main] ClientsManager - Helm deploy: { generators: { chart : kubernetes/generators } }
[INFO ] 2023-09-11 09:18:41.074 [main] ClientsManager - kubernetes/generators
[INFO ] 2023-09-11 09:18:41.385 [pool-5-thread-1] Helm - NAME: generators
[INFO ] 2023-09-11 09:18:41.386 [pool-5-thread-1] Helm - LAST DEPLOYED: Mon Sep 11 09:18:41 2023
[INFO ] 2023-09-11 09:18:41.386 [pool-5-thread-1] Helm - NAMESPACE: operator
[INFO ] 2023-09-11 09:18:41.386 [pool-5-thread-1] Helm - STATUS: deployed
[INFO ] 2023-09-11 09:18:41.386 [pool-5-thread-1] Helm - REVISION: 1
[INFO ] 2023-09-11 09:18:41.386 [pool-5-thread-1] Helm - TEST SUITE: None
[INFO ] 2023-09-11 09:20:55.344 [main] ClientsManager - Generator started with parameters: {"generatorType":"CARS","topic":"input","brokerList":"kafka.operator.svc.cluster.local:9092","limiterType":"DATASET","limiterMaxNoise":0.1,"amplitude":0,"period":3600,"verticalPhase":300000,"fileName":"datasets/CARS_3D_1S_4_sub_35K_max.csv","header":true,"separator":"|","scale":1.0,"redisHost":"redis-cluster","redisPort":6379}
[INFO ] 2023-09-11 09:21:11.762 [main] ClientsManager - Generator started with parameters: {"generatorType":"CARS","topic":"input","brokerList":"kafka.operator.svc.cluster.local:9092","limiterType":"DATASET","limiterMaxNoise":0.1,"amplitude":0,"period":3600,"verticalPhase":300000,"fileName":"datasets/CARS_3D_1S_4_sub_35K_max.csv","header":true,"separator":"|","scale":1.0,"redisHost":"redis-cluster","redisPort":6379}
[INFO ] 2023-09-11 09:21:25.692 [main] ClientsManager - Generator started with parameters: {"generatorType":"CARS","topic":"input","brokerList":"kafka.operator.svc.cluster.local:9092","limiterType":"DATASET","limiterMaxNoise":0.1,"amplitude":0,"period":3600,"verticalPhase":300000,"fileName":"datasets/CARS_3D_1S_4_sub_35K_max.csv","header":true,"separator":"|","scale":1.0,"redisHost":"redis-cluster","redisPort":6379}
[INFO ] 2023-09-11 09:21:25.709 [main] SequenceFSM - { "apiVersion": "flink.apache.org/v1beta1", "kind": "FlinkDeployment", "metadata": { "name": "operator" }, "spec": { "image": "morgel/flink:1.17.0-java11", "flinkVersion": "v1_17", "imagePullPolicy": "Always", "flinkConfiguration": { "taskmanager.numberOfTaskSlots": "1", "kubernetes.jobmanager.annotations": "prometheus.io/scrape:true,prometheus.io/port:9999", "kubernetes.taskmanager.annotations": "prometheus.io/scrape:true,prometheus.io/port:9999", "metrics.reporter.prom.factory.class": "org.apache.flink.metrics.prometheus.PrometheusReporterFactory","metrics.reporter.prom.port": "9999","heartbeat.timeout": "20000", "heartbeat.interval": "5000", "state.checkpoints.dir": "hdfs://130.149.248.67:9000/flink/checkpoints", "state.savepoints.dir": "hdfs://130.149.248.67:9000/flink/savepoints", "kubernetes.operator.job.autoscaler.enabled": "true", "kubernetes.operator.job.autoscaler.stabilization.interval": "2m", "kubernetes.operator.job.autoscaler.metrics.window": "1m", "kubernetes.operator.job.autoscaler.target.utilization": "0.35", "kubernetes.operator.job.autoscaler.target.utilization.boundary": "0.2", "kubernetes.operator.job.autoscaler.restart.time": "1m", "kubernetes.operator.job.autoscaler.catch-up.duration": "5m", "pipeline.max-parallelism": "24" }, "podTemplate": { "spec": { "containers": [{ "name": "flink-main-container", "ports": [{ "containerPort": 9999, "name": "metrics" }] }] } }, "serviceAccount": "default", "jobManager": { "resource": { "memory": "4096m", "cpu": 1.0 } }, "taskManager": { "resource": { "memory": "4096m", "cpu": 1.0 } }, "job": { "jarURI": "local:///opt/flink/usrlib/jobs-1.0.jar", "entryClass": "de.tu_berlin.dos.arm.streaming_experiment_suite.jobs.TopSpeedWindowing", "args": ["--chkInterval", "10000", "--jobName", "operator", "--consumerTopic", "input", "--producerTopic", "output", "--chkDir", "hdfs://130.149.248.67:9000/flink/checkpoints", "--brokerList", "kafka.operator.svc.cluster.local:9092"], "parallelism": 24, "upgradeMode": "savepoint", "state": "running" }}}
[INFO ] 2023-09-11 09:22:25.156 [main] SequenceFSM - Started target job: FlinkJob{port=32007, entryClass='de.tu_berlin.dos.arm.streaming_experiment_suite.jobs.TopSpeedWindowing', jobName='operator', brokerList='kafka.operator.svc.cluster.local:9092', consTopic='input', prodTopic='output', extraArgs={}, config={scaleOut: 24, taskSlots: 1, cpu: 1.0, memory: 4096, chkInt: 10000}, tsList=[1694424146], jobId='9823b637e2b998e34613ef9595668c42', isActive=true} at TS: 1694424146
[INFO ] 2023-09-11 09:22:25.156 [main] SequenceFSM - STATE-CHANGE: INITIALIZE -> EXECUTE
[INFO ] 2023-09-11 09:22:25.219 [main] SequenceFSM - Starting Experiment: 1694424146
[INFO ] 2023-09-11 10:07:31.008 [pool-2-thread-1] SequenceFSM - Injecting delay into target job: operator at TS: 1694426852
[WARN ] 2023-09-11 10:07:31.029 [pool-2-thread-1] VersionUsageUtils - The client is using resource type 'networkchaos' with unstable version 'v1alpha1'
[INFO ] 2023-09-11 10:52:30.010 [pool-2-thread-2] SequenceFSM - Injecting delay into target job: operator at TS: 1694429551
[INFO ] 2023-09-11 11:37:26.006 [pool-2-thread-3] SequenceFSM - Injecting delay into target job: operator at TS: 1694432247
[INFO ] 2023-09-11 12:22:30.010 [pool-2-thread-4] SequenceFSM - Injecting delay into target job: operator at TS: 1694434951
[ERROR] 2023-09-11 13:07:25.269 [pool-2-thread-5] Listener - java.net.SocketException: Connection reset
[INFO ] 2023-09-11 13:52:26.005 [pool-2-thread-6] SequenceFSM - Injecting delay into target job: operator at TS: 1694440347
[INFO ] 2023-09-11 14:37:31.009 [pool-2-thread-7] SequenceFSM - Injecting delay into target job: operator at TS: 1694443052
[INFO ] 2023-09-11 15:22:29.042 [pool-2-thread-8] SequenceFSM - Injecting delay into target job: operator at TS: 1694445750
[INFO ] 2023-09-11 16:07:40.009 [pool-2-thread-9] SequenceFSM - Injecting delay into target job: operator at TS: 1694448461
[INFO ] 2023-09-11 16:52:28.015 [pool-2-thread-10] SequenceFSM - Injecting delay into target job: operator at TS: 1694451149
[INFO ] 2023-09-11 17:37:35.010 [pool-2-thread-11] SequenceFSM - Injecting delay into target job: operator at TS: 1694453856
[INFO ] 2023-09-11 18:22:34.008 [pool-2-thread-12] SequenceFSM - Injecting delay into target job: operator at TS: 1694456555
[INFO ] 2023-09-11 19:07:33.008 [pool-2-thread-13] SequenceFSM - Injecting delay into target job: operator at TS: 1694459254
[INFO ] 2023-09-11 19:52:28.006 [pool-2-thread-14] SequenceFSM - Injecting delay into target job: operator at TS: 1694461949
[INFO ] 2023-09-11 20:37:32.005 [pool-2-thread-15] SequenceFSM - Injecting delay into target job: operator at TS: 1694464653
[INFO ] 2023-09-11 21:22:26.006 [pool-2-thread-16] SequenceFSM - Injecting delay into target job: operator at TS: 1694467347
[INFO ] 2023-09-11 22:07:34.012 [pool-2-thread-17] SequenceFSM - Injecting delay into target job: operator at TS: 1694470055
[INFO ] 2023-09-11 22:52:34.008 [pool-2-thread-18] SequenceFSM - Injecting delay into target job: operator at TS: 1694472755
[INFO ] 2023-09-11 23:37:33.002 [pool-2-thread-19] SequenceFSM - Injecting delay into target job: operator at TS: 1694475454
[INFO ] 2023-09-12 00:22:28.011 [pool-2-thread-20] SequenceFSM - Injecting delay into target job: operator at TS: 1694478149
[INFO ] 2023-09-12 01:07:33.010 [pool-2-thread-21] SequenceFSM - Injecting delay into target job: operator at TS: 1694480854
[INFO ] 2023-09-12 01:52:32.010 [pool-2-thread-22] SequenceFSM - Injecting delay into target job: operator at TS: 1694483553
[INFO ] 2023-09-12 02:37:38.011 [pool-2-thread-23] SequenceFSM - Injecting delay into target job: operator at TS: 1694486259
[INFO ] 2023-09-12 03:22:25.019 [main] SequenceFSM - Stopping Experiment: 1694488946
[INFO ] 2023-09-12 03:22:25.022 [main] SequenceFSM - Gathering metrics and stopping job with configuration: FlinkJob{port=32007, entryClass='de.tu_berlin.dos.arm.streaming_experiment_suite.jobs.TopSpeedWindowing', jobName='operator', brokerList='kafka.operator.svc.cluster.local:9092', consTopic='input', prodTopic='output', extraArgs={}, config={scaleOut: 24, taskSlots: 1, cpu: 1.0, memory: 4096, chkInt: 10000}, tsList=[1694424146, 1694426852, 1694429551, 1694432247, 1694434951, 1694440347, 1694443052, 1694445750, 1694448461, 1694451149, 1694453856, 1694456555, 1694459254, 1694461949, 1694464653, 1694467347, 1694470055, 1694472755, 1694475454, 1694478149, 1694480854, 1694483553, 1694486259, 1694488946], jobId='9823b637e2b998e34613ef9595668c42', isActive=true}
[INFO ] 2023-09-12 03:22:31.010 [pool-2-thread-24] SequenceFSM - Injecting delay into target job: operator at TS: 1694488952
[INFO ] 2023-09-12 03:28:00.493 [pool-2-thread-25] TimeSeries - File not found, creating 1_operator_taskSlots.out
[INFO ] 2023-09-12 03:28:00.493 [pool-2-thread-31] TimeSeries - File not found, creating 1_operator_cpuLoad.out
[INFO ] 2023-09-12 03:28:00.493 [pool-2-thread-28] TimeSeries - File not found, creating 1_operator_scaleOuts.out
[INFO ] 2023-09-12 03:28:00.493 [pool-2-thread-26] TimeSeries - File not found, creating 1_operator_consLag.out
[INFO ] 2023-09-12 03:28:00.493 [pool-2-thread-29] TimeSeries - File not found, creating 1_operator_thrRate.out
[INFO ] 2023-09-12 03:28:00.493 [pool-2-thread-27] TimeSeries - File not found, creating 1_operator_workRate.out
[INFO ] 2023-09-12 03:28:00.493 [pool-2-thread-30] TimeSeries - File not found, creating 1_operator_latency.out
